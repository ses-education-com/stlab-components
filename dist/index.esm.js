var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{AdminTable:()=>f,AsyncButton:()=>x,AutoBreadcrumbs:()=>w,AvatarSelector:()=>N,ConfirmDialog:()=>D,CustomCardList:()=>H,ImageSelector:()=>W,ModalWindow:()=>I,Notifications:()=>ee,PasswordChangeDialog:()=>ne,Spinner:()=>ae,clearAllMessages:()=>le,deleteMessage:()=>ie,hideMessage:()=>se,notificationsActionTypes:()=>z,notificationsReducers:()=>J,showMessage:()=>oe});const r=require("react");var n=e.n(r);const a=require("uniquid");var o=e.n(a);const s=require("@material-ui/data-grid"),i=require("@material-ui/core");function l(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends n().Component{constructor(){super(...arguments),l(this,"state",{search:""}),l(this,"updateValue",(e=>{let{target:t}=e;const{value:r}=t;this.setState({search:r}),""===r&&"function"==typeof this.props.onChange&&this.props.onChange(r)})),l(this,"onKeyDown",(e=>{13==e.keyCode&&"function"==typeof this.props.onChange&&this.props.onChange(this.state.search)}))}componentDidMount(){const{search:e=""}=this.props;this.setState({search:e})}componentDidUpdate(e){const{search:t}=this.props,{search:r}=e;t!==r&&this.setState({search:t})}render(){const{onChange:e=console.debug,placeholder:t="search..."}=this.props,{search:r}=this.state;return n().createElement(i.TextField,{InputProps:{startAdornment:n().createElement(i.InputAdornment,{position:"start"},n().createElement(s.GridSearchIcon,null)),endAdornment:""!==r&&n().createElement(i.Button,{onClick:()=>e(r)},"Go")},name:"search",value:r,placeholder:t,onChange:this.updateValue,onKeyDown:this.onKeyDown})}}const m=c;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function d(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=e=>{let{children:t}=e;return n().createElement(s.GridToolbarContainer,{className:"admin-table-toolbar"},t)},h={loadingOverlay:n().createElement(s.GridOverlay,null,n().createElement("div",{style:{position:"absolute",top:0,width:"100%"}},n().createElement(i.LinearProgress,null)))};class g extends n().Component{constructor(){super(...arguments),d(this,"state",{search:"",id:null,rows:[],valueGetters:{}}),d(this,"filterRows",(()=>{let{rows:e=[],searchFields:t=[],columns:r=[]}=this.props,{search:n,valueGetters:a}=this.state;if(n="string"==typeof n?n.toLowerCase():"",console.debug(n,e,t),""===n||!Array.isArray(e)||!Array.isArray(t)||!e.length>0||!t.length>0)return this.setState({rows:e});console.debug("valueGetters",a);const o=e.filter((e=>{let r=!1;for(let o=0;o<t.length&&!1===r;o++){const s=t[o],i=a[s]({value:e[s]});console.debug("valueGetter result",i),"string"==typeof i&&i.toLowerCase().includes(n)&&(r=!0)}return r}));this.setState({rows:[...o]})})),d(this,"onSearch",(e=>this.setState({search:e},(()=>this.filterRows()))))}componentDidMount(){const e=o()();this.setState({id:e}),this.findFieldValueGetters(),this.filterRows()}componentDidUpdate(e){const{rows:t,columns:r}=this.props,{rows:n,columns:a}=e;r!==a&&this.findFieldValueGetters(),t!==n&&this.filterRows()}findFieldValueGetters(){const{columns:e=[],searchFields:t=[]}=this.props;if(!Array.isArray(e))return;const r=t.reduce(((t,r)=>{let n=e.find((e=>e.field===r));const a=n?"function"==typeof n.valueGetter?n.valueGetter:"function"==typeof n.valueFormatter?n.valueFormatter:e=>{let{value:t}=e;return t}:e=>{let{value:t}=e;return t};return{...t,[r]:a}}),{});this.setState({valueGetters:r})}render(){let{rows:e,columns:t={},searchFields:r=[],components:a={},buttons:o=n().createElement(s.GridToolbarExport,null),searchComponent:i,searchPlaceholder:l="Search...",className:c,rowHeight:d=40,...g}=this.props;const{search:f,id:y,rows:b}=this.state;return console.debug("rows",b),i=i||n().createElement(m,{key:"".concat(y,"-search"),search:f,onChange:this.onSearch,placeholder:l}),a={...h,Toolbar:()=>n().createElement(p,null,n().createElement("span",{className:"admin-table-buttons"},o),n().createElement("span",{className:"admin-table-search"},i)),...a},n().createElement("div",{className:"admin-table-container".concat(c?" ".concat(c):"")},n().createElement(s.DataGrid,u({key:"atable-".concat(y),components:a,rows:b,rowHeight:d,columns:t},g)))}}const f=g,y=require("react-router-dom"),b=require("@material-ui/icons");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}const v=e=>{let{item:t,defaultItemText:r}=e;return t.icon&&t.text?n().createElement(n().Fragment,null,t.icon,t.text):t.text||t.icon||t.to||r},S=e=>{let{item:t,defaultItemText:r}=e;return t.to?n().createElement(y.Link,{className:"breadcrumbs-item",to:t.to},n().createElement(v,{item:t,defaultItemText:r})):n().createElement(i.Typography,null,n().createElement(v,{item:t,defaultItemText:r}))};class C extends n().Component{render(){let{defaultItemText:e="***",items:t,className:r="auto-breadcrumbs",showLastItemAsLink:a=!1,separator:o=n().createElement(b.ChevronRight,null),...s}=this.props;return Array.isArray(t)||(console.error("Breadcrumbs: wrong type of items passed. Expected array of objects, passed:",typeof t,"\nReplaced with empty array."),t=[]),!a&&t.length>0&&(t[t.length-1].to=null),n().createElement("div",{className:r},n().createElement(i.Breadcrumbs,E({separator:o},s),t.map(((t,r)=>n().createElement(S,{item:t,defaultItemText:e,key:"breadcrumb-item-".concat(r)})))))}}const w=C;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}function P(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const T=()=>n().createElement(i.CircularProgress,{className:"loading-icon"});class O extends n().Component{constructor(){super(...arguments),P(this,"state",{loading:!1}),P(this,"clicked",(async e=>{const{onClick:t}=this.props;this.setState({loading:!0});try{"function"==typeof t&&await t(e),this.setState({loading:!1})}catch(e){this.setState({loading:!1}),"function"==typeof this.props.onError&&this.props.onError(e)}}))}render(){const{icon:e,loadingIcon:t=n().createElement(T,null),iconPosition:r="left",children:a,className:o="",...s}=this.props,{loading:l}=this.state;return console.debug("async button Loading:",l),n().createElement(i.Button,A({disabled:l,className:"async-button icon-".concat(r," ").concat(o)},s,{onClick:this.clicked}),l?t:e&&e,a)}}const x=O;class j extends n().Component{render(){const{image:e,defaultImage:t="https://images.ses-education.com/courses/users/user-no-image.png",onChange:r,onDelete:a}=this.props;return n().createElement("label",{className:"avatar-selector",htmlFor:"image-file"},e&&n().createElement(i.IconButton,{onClick:a},n().createElement(b.Delete,null)),n().createElement("input",{type:"file",id:"image-file",accept:"image/*",style:{display:"none"},onChange:r}),n().createElement("div",{className:"avatar-image",style:{backgroundImage:"url(".concat(e||t,")")}}))}}const N=j;class G extends n().Component{render(){const{header:e,children:t,buttons:r,onSubmit:a=(e=>(console.debug(e),!1)),formClassName:o,...s}=this.props;return n().createElement(i.Modal,s,n().createElement("form",{className:"modal-window".concat(o?" ".concat(o):""),onSubmit:a},n().createElement("div",{className:"modal-header"},e),n().createElement("div",{className:"modal-content"},t),n().createElement("div",{item:!0,className:"modal-buttons-container"},r)))}}const I=G;function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(this,arguments)}class k extends n().Component{render(){const{prompt:e,onConfirm:t,onClose:r,cancelText:a="Cancel",confirmText:o="Yes",...s}=this.props;return n().createElement(I,M({formClassName:"confirm-dialog stretch"},s,{onClose:r,buttons:[n().createElement(i.Button,{variant:"contained",color:"primary",onClick:t},o),n().createElement(i.Button,{variant:"contained",color:"secondary",onClick:r},a)]}),n().createElement(i.Typography,null,e))}}const D=k;function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L.apply(this,arguments)}const{REACT_APP_MEDIA_URL:_}=process.env,B={xs:12,md:4,lg:3},F={spacing:4},R={item:!0,xs:12,sm:6,md:4,lg:3,component:"div"},H=e=>{let{items:t,itemProps:r,organization:a,containerProps:o={},cardImageProps:s={},contentProps:l={},rightPart:c}=e;return r={...B,...r},o={...F,...o||{}},s={...R,...s},l={xs:12,sm:6,md:8,lg:9,...l},n().createElement(i.Grid,L({container:!0},o,{className:"custom-card-list"}),Array.isArray(t)&&t.map(((e,t)=>n().createElement(i.Grid,L({item:!0},r,{key:"program-".concat(t)}),n().createElement(i.Card,{className:"custom-card-list-item"},n().createElement(i.CardActionArea,{program:e,component:y.Link,to:e.link||"#"},n().createElement(i.Grid,{container:!0},n().createElement(i.Grid,L({className:"custom-card-image-container"},s,{style:{backgroundImage:"url(".concat(e.image?e.image:"".concat(_,"/course-no-image.png"),")")}})),n().createElement(i.Grid,L({item:!0},l),e&&e.title&&n().createElement(i.CardContent,{component:"h3"},e.title),e&&e.description&&n().createElement(i.CardContent,null,e.description)),c&&c)))))))};function q(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class V extends n().Component{constructor(){super(...arguments),q(this,"state",{showConfirmDelete:!1}),q(this,"confirmDeletion",(e=>{this.setState({showConfirmDelete:!0})}))}render(){const{image:e,defaultImage:t,onDelete:r,onSelect:a,confirmationText:o="Delete image?",closeButtonClass:s="image-selector-close"}=this.props,{showConfirmDelete:l}=this.state;return console.debug("ImageSelector",e,t),n().createElement("label",{className:"image-selector",htmlFor:"image-file"},e&&n().createElement(i.IconButton,{onClick:this.confirmDeletion,className:s},n().createElement(b.Delete,null)),n().createElement("input",{type:"file",id:"image-file",name:"image",accept:"image/*",style:{display:"none"},onChange:a}),n().createElement("div",{className:"display",style:{backgroundImage:"url(".concat(e||t,")")}}),n().createElement(D,{open:l,prompt:o,onConfirm:async()=>{await r(),this.setState({showConfirmDelete:!1})},onClose:()=>this.setState({showConfirmDelete:!1})}))}}const W=V,K=require("@material-ui/lab/Alert");var U=e.n(K);const z={SHOW_MESSAGE:"SHOW_MESSAGE",DELETE_MESSAGE:"DELETE_MESSAGE",HIDE_MESSAGE:"HIDE_MESSAGE",CLEAR_ALL_MESSAGES:"CLEAR_ALL_MESSAGES"},Y={messages:[],maxMessages:5},J=(e,t)=>{e="object"==typeof e?{...Y,...e}:{...Y};let r,n,a,{messages:s,maxMessages:i}=e,l=(new Date).toGMTString();const{type:c,payload:m}=t;let u={...e};switch(c){case z.SHOW_MESSAGE:Array.isArray(s)&&(s=[...s,{...m,id:o()("msg_"),timestamp:l}],s.length>i&&(s=s.slice(-i)),u={...e,messages:s});break;case z.DELETE_MESSAGE:Array.isArray(s)&&s.length>0&&(a=s.findIndex((e=>e.id===m))||0,n=[...s],n.splice(a,1),s=[...n],u={...e,messages:s});break;case z.HIDE_MESSAGE:Array.isArray(s)&&s.length>0&&(a=s.findIndex((e=>e.id===m))||0,console.debug("hiding message",a,m),n=[...s],r=n[a],n[a]={...r,hidden:!0},s=[...n],u={...e,messages:s});break;case z.CLEAR_ALL_MESSAGES:Array.isArray(s)&&s.length>0&&(s=[],u={...e,messages:s})}return u};function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(this,arguments)}const X={autoCloseIn:3e3,doNotCloseOn:["clickaway"],animationTime:300,alertProps:{elevation:6,variant:"filled"},manyMessagesIs:2},Z=e=>{const{children:t,onClose:a,autoCloseIn:o,doNotCloseOn:s,animationTime:l=300,...c}=e;let[m,u]=(0,r.useState)(""),[d,p]=(0,r.useState)(!1);const h=(e,t)=>{Array.isArray(s)&&s.includes(t)||(u("closing"),setTimeout(a,l))};return(0,r.useEffect)((()=>{!d&&o&&"function"==typeof a&&(p(!0),setTimeout(h,o))})),n().createElement(i.Snackbar,{open:!0,onClose:h,className:m},n().createElement(U(),Q({},c,{onClose:h}),t))};class $ extends n().Component{constructor(){var e,t,r,n;super(...arguments),e=this,r=e=>{const{onCloseMessage:t}=this.props;"function"!=typeof t||t(e)},(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t="closeHandler"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}render(){let{messages:e,className:t="notifications-container",config:r={},onCloseAll:a}=this.props;console.debug("Notofications messages:",e),r={...X,...r};const{autoCloseIn:o,doNotCloseOn:s,animationTime:l,alertProps:c,topToBottom:m,manyMessagesIs:u}=r;if(!Array.isArray(e))return console.error("Notitifactions error: messages is not an array!"),"";e=m?[...e].reverse():e;const d=e.filter((e=>!e.hidden)),p=d.length,h=p>u;return n().createElement("div",{className:"".concat(t).concat(h?" has-many-items":"")},h&&n().createElement(i.Button,{className:"close-button",onClick:a||(()=>console.debug("closing all"))},n().createElement(b.Close,{size:"small",color:"secondary"}),"close all"),n().createElement("div",{className:"messages"},p?d.map((e=>(console.debug("message ",e),e.hidden?null:n().createElement(Z,Q({key:"notification-".concat(e.id),severity:e.type,onClose:()=>this.closeHandler(e.id),autoCloseIn:null===e.autoCloseIn||void 0===e.autoCloseIn?o:e.autoCloseIn,doNotCloseOn:s,animationTime:l},c),e.message)))):null))}}const ee=$;function te(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class re extends n().Component{constructor(){super(...arguments),te(this,"state",{password:null,password2:null,error:null}),te(this,"updateValue",(e=>{const{target:t}=e,{name:r,value:n}=t,{passwordErrorText:a="Passwords don't match"}=this.props;this.setState({[r]:n,error:null},(()=>{this.checkPasswordMatch()||this.setState({error:a})}))})),te(this,"checkPasswordMatch",(()=>{const{password:e,password2:t}=this.state;return!e||!t||e===t}))}render(){const{open:e,onClose:t,onSubmit:r,headerText:a="Password change",promptText:o="Please choose new password",cancelText:s="Cancel",saveText:l="Save",passwordLabelText:c="Password",password2LabelText:m="Confirm password"}=this.props,{password:u,password2:d,error:p}=this.state,h=u&&d&&!p;return n().createElement(i.Modal,{open:e,onClose:t},n().createElement("div",{className:"password-modal-container"},n().createElement(i.Typography,{className:"header",color:"primary"},a),n().createElement("p",{className:"prompt"},o),n().createElement("div",{item:!0,className:"fields"},n().createElement(i.TextField,{id:"password1",name:"password",label:c,variant:"outlined",type:"password",onChange:this.updateValue,error:Boolean(p),helperText:p||"",value:u}),n().createElement(i.TextField,{id:"password2",name:"password2",label:m,variant:"outlined",type:"password",onChange:this.updateValue,error:p,value:d})),n().createElement("div",{item:!0,className:"buttons-container"},n().createElement(i.Button,{variant:"contained",onClick:t},s),n().createElement(i.Button,{disabled:!h,variant:"contained",color:"primary",onClick:()=>r(u)},l))))}}const ne=re,ae=e=>n().createElement(i.Container,null,n().createElement(i.CircularProgress,{color:"primary"})),oe=(e,t,r)=>n=>{console.debug("showMessage is dispatching with",n),n({type:z.SHOW_MESSAGE,payload:{message:e,type:t,autoCloseIn:r}})},se=e=>t=>{t({type:z.HIDE_MESSAGE,payload:e})},ie=e=>t=>{t({type:z.DELETE_MESSAGE,payload:e})},le=()=>e=>{e({type:z.CLEAR_ALL_MESSAGES})};module.exports=t;
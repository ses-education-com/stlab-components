var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{AdminTable:()=>g,AsyncButton:()=>I,AutoBreadcrumbs:()=>w,AvatarSelector:()=>N,ConfirmDialog:()=>_,ImageSelector:()=>B,ModalWindow:()=>P,Notifications:()=>Y,Spinner:()=>J,clearAllMessages:()=>$,deleteMessage:()=>Z,hideMessage:()=>X,notificationsActionTypes:()=>R,notificationsReducers:()=>V,showMessage:()=>Q});const r=require("react");var n=e.n(r);const o=require("uniquid");var a=e.n(o);const s=require("@material-ui/data-grid"),i=require("@material-ui/core");function l(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends n().Component{constructor(){super(...arguments),l(this,"state",{search:""}),l(this,"updateValue",(e=>{let{target:t}=e;const{value:r}=t;this.setState({search:r}),""===r&&"function"==typeof this.props.onChange&&this.props.onChange(r)})),l(this,"onKeyDown",(e=>{13==e.keyCode&&"function"==typeof this.props.onChange&&this.props.onChange(this.state.search)}))}componentDidMount(){const{search:e=""}=this.props;this.setState({search:e})}componentDidUpdate(e){const{search:t}=this.props,{search:r}=e;t!==r&&this.setState({search:t})}render(){const{onChange:e=console.debug,placeholder:t="search..."}=this.props,{search:r}=this.state;return n().createElement(i.TextField,{InputProps:{startAdornment:n().createElement(i.InputAdornment,{position:"start"},n().createElement(s.GridSearchIcon,null)),endAdornment:""!==r&&n().createElement(i.Button,{onClick:()=>e(r)},"Go")},name:"search",value:r,placeholder:t,onChange:this.updateValue,onKeyDown:this.onKeyDown})}}const m=c;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function d(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=e=>{let{children:t}=e;return n().createElement(s.GridToolbarContainer,{className:"admin-table-toolbar"},t)},h={loadingOverlay:n().createElement(s.GridOverlay,null,n().createElement("div",{style:{position:"absolute",top:0,width:"100%"}},n().createElement(i.LinearProgress,null)))};class f extends n().Component{constructor(){super(...arguments),d(this,"state",{search:"",id:null,rows:[],valueGetters:{}}),d(this,"filterRows",(()=>{let{rows:e=[],searchFields:t=[],columns:r=[]}=this.props,{search:n,valueGetters:o}=this.state;if(n="string"==typeof n?n.toLowerCase():"",console.debug(n,e,t),""===n||!Array.isArray(e)||!Array.isArray(t)||!e.length>0||!t.length>0)return this.setState({rows:e});console.debug("valueGetters",o);const a=e.filter((e=>{let r=!1;for(let a=0;a<t.length&&!1===r;a++){const s=t[a],i=o[s]({value:e[s]});console.debug("valueGetter result",i),"string"==typeof i&&i.toLowerCase().includes(n)&&(r=!0)}return r}));this.setState({rows:[...a]})})),d(this,"onSearch",(e=>this.setState({search:e},(()=>this.filterRows()))))}componentDidMount(){const e=a()();this.setState({id:e}),this.findFieldValueGetters(),this.filterRows()}componentDidUpdate(e){const{rows:t,columns:r}=this.props,{rows:n,columns:o}=e;r!==o&&this.findFieldValueGetters(),t!==n&&this.filterRows()}findFieldValueGetters(){const{columns:e=[],searchFields:t=[]}=this.props;if(!Array.isArray(e))return;const r=t.reduce(((t,r)=>{let n=e.find((e=>e.field===r));const o=n?"function"==typeof n.valueGetter?n.valueGetter:"function"==typeof n.valueFormatter?n.valueFormatter:e=>{let{value:t}=e;return t}:e=>{let{value:t}=e;return t};return{...t,[r]:o}}),{});this.setState({valueGetters:r})}render(){let{rows:e,columns:t={},searchFields:r=[],components:o={},buttons:a=n().createElement(s.GridToolbarExport,null),searchComponent:i,searchPlaceholder:l="Search...",className:c,rowHeight:d=40,...f}=this.props;const{search:g,id:y,rows:b}=this.state;return console.debug("rows",b),i=i||n().createElement(m,{key:"".concat(y,"-search"),search:g,onChange:this.onSearch,placeholder:l}),o={...h,Toolbar:()=>n().createElement(p,null,n().createElement("span",{className:"admin-table-buttons"},a),n().createElement("span",{className:"admin-table-search"},i)),...o},n().createElement("div",{className:"admin-table-container".concat(c?" ".concat(c):"")},n().createElement(s.DataGrid,u({key:"atable-".concat(y),components:o,rows:b,rowHeight:d,columns:t},f)))}}const g=f,y=require("react-router-dom"),b=require("@material-ui/icons");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}const v=e=>{let{item:t,defaultItemText:r}=e;return t.icon&&t.text?n().createElement(n().Fragment,null,t.icon,t.text):t.text||t.icon||t.to||r},S=e=>{let{item:t,defaultItemText:r}=e;return t.to?n().createElement(y.Link,{className:"breadcrumbs-item",to:t.to},n().createElement(v,{item:t,defaultItemText:r})):n().createElement(i.Typography,null,n().createElement(v,{item:t,defaultItemText:r}))};class C extends n().Component{render(){let{defaultItemText:e="***",items:t,className:r="auto-breadcrumbs",showLastItemAsLink:o=!1,separator:a=n().createElement(b.ChevronRight,null),...s}=this.props;return Array.isArray(t)||(console.error("Breadcrumbs: wrong type of items passed. Expected array of objects, passed:",typeof t,"\nReplaced with empty array."),t=[]),!o&&t.length>0&&(t[t.length-1].to=null),n().createElement("div",{className:r},n().createElement(i.Breadcrumbs,E({separator:a},s),t.map(((t,r)=>n().createElement(S,{item:t,defaultItemText:e,key:"breadcrumb-item-".concat(r)})))))}}const w=C;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}function O(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const j=()=>n().createElement(i.CircularProgress,{className:"loading-icon"});class T extends n().Component{constructor(){super(...arguments),O(this,"state",{loading:!1}),O(this,"clicked",(async e=>{const{onClick:t}=this.props;this.setState({loading:!0});try{"function"==typeof t&&await t(e),this.setState({loading:!1})}catch(e){this.setState({loading:!1}),"function"==typeof this.props.onError&&this.props.onError(e)}}))}render(){const{icon:e,loadingIcon:t=n().createElement(j,null),iconPosition:r="left",children:o,className:a="",...s}=this.props,{loading:l}=this.state;return console.debug("async button Loading:",l),n().createElement(i.Button,A({disabled:l,className:"async-button icon-".concat(r," ").concat(a)},s,{onClick:this.clicked}),l?t:e&&e,o)}}const I=T;class M extends n().Component{render(){const{image:e,defaultImage:t="https://images.ses-education.com/courses/users/user-no-image.png",onChange:r,onDelete:o}=this.props;return n().createElement("label",{className:"avatar-selector",htmlFor:"image-file"},e&&n().createElement(i.IconButton,{onClick:o},n().createElement(b.Delete,null)),n().createElement("input",{type:"file",id:"image-file",accept:"image/*",style:{display:"none"},onChange:r}),n().createElement("div",{className:"avatar-image",style:{backgroundImage:"url(".concat(e||t,")")}}))}}const N=M;class G extends n().Component{render(){const{header:e,children:t,buttons:r,onSubmit:o=(e=>(console.debug(e),!1)),formClassName:a,...s}=this.props;return n().createElement(i.Modal,s,n().createElement("form",{className:"modal-window".concat(a?" ".concat(a):""),onSubmit:o},n().createElement("div",{className:"modal-header"},e),n().createElement("div",{className:"modal-content"},t),n().createElement("div",{item:!0,className:"modal-buttons-container"},r)))}}const P=G;function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}class x extends n().Component{render(){const{prompt:e,onConfirm:t,onClose:r,cancelText:o="Cancel",confirmText:a="Yes",...s}=this.props;return n().createElement(P,D({formClassName:"confirm-dialog stretch"},s,{onClose:r,buttons:[n().createElement(i.Button,{variant:"contained",color:"primary",onClick:t},a),n().createElement(i.Button,{variant:"contained",color:"secondary",onClick:r},o)]}),n().createElement(i.Typography,null,e))}}const _=x;function k(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class L extends n().Component{constructor(){super(...arguments),k(this,"state",{showConfirmDelete:!1}),k(this,"confirmDeletion",(e=>{this.setState({showConfirmDelete:!0})}))}render(){const{image:e,defaultImage:t,onDelete:r,onSelect:o,confirmationText:a="Delete image?",closeButtonClass:s="image-selector-close"}=this.props,{showConfirmDelete:l}=this.state;return console.debug("ImageSelector",e,t),n().createElement("label",{className:"image-selector",htmlFor:"image-file"},e&&n().createElement(i.IconButton,{onClick:this.confirmDeletion,className:s},n().createElement(b.Delete,null)),n().createElement("input",{type:"file",id:"image-file",name:"image",accept:"image/*",style:{display:"none"},onChange:o}),n().createElement("div",{className:"display",style:{backgroundImage:"url(".concat(e||t,")")}}),n().createElement(_,{open:l,prompt:a,onConfirm:async()=>{await r(),this.setState({showConfirmDelete:!1})},onClose:()=>this.setState({showConfirmDelete:!1})}))}}const B=L,F=require("@material-ui/lab/Alert");var H=e.n(F);const R={SHOW_MESSAGE:"SHOW_MESSAGE",DELETE_MESSAGE:"DELETE_MESSAGE",HIDE_MESSAGE:"HIDE_MESSAGE",CLEAR_ALL_MESSAGES:"CLEAR_ALL_MESSAGES"},q={messages:[],maxMessages:5},V=(e,t)=>{e="object"==typeof e?{...q,...e}:{...q};let r,n,o,{messages:s,maxMessages:i}=e,l=(new Date).toGMTString();const{type:c,payload:m}=t;let u={...e};switch(c){case R.SHOW_MESSAGE:Array.isArray(s)&&(s=[...s,{...m,id:a()("msg_"),timestamp:l}],s.length>i&&(s=s.slice(-i)),u={...e,messages:s});break;case R.DELETE_MESSAGE:Array.isArray(s)&&s.length>0&&(o=s.findIndex((e=>e.id===m))||0,n=[...s],n.splice(o,1),s=[...n],u={...e,messages:s});break;case R.HIDE_MESSAGE:Array.isArray(s)&&s.length>0&&(o=s.findIndex((e=>e.id===m))||0,console.debug("hiding message",o,m),n=[...s],r=n[o],n[o]={...r,hidden:!0},s=[...n],u={...e,messages:s});break;case R.CLEAR_ALL_MESSAGES:Array.isArray(s)&&s.length>0&&(s=[],u={...e,messages:s})}return u};function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}const K={autoCloseIn:3e3,doNotCloseOn:["clickaway"],animationTime:300,alertProps:{elevation:6,variant:"filled"},manyMessagesIs:2},U=e=>{const{children:t,onClose:o,autoCloseIn:a,doNotCloseOn:s,animationTime:l=300,...c}=e;let[m,u]=(0,r.useState)(""),[d,p]=(0,r.useState)(!1);const h=(e,t)=>{Array.isArray(s)&&s.includes(t)||(u("closing"),setTimeout(o,l))};return(0,r.useEffect)((()=>{!d&&a&&"function"==typeof o&&(p(!0),setTimeout(h,a))})),n().createElement(i.Snackbar,{open:!0,onClose:h,className:m},n().createElement(H(),W({},c,{onClose:h}),t))};class z extends n().Component{constructor(){var e,t,r,n;super(...arguments),e=this,r=e=>{const{onCloseMessage:t}=this.props;"function"!=typeof t||t(e)},(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t="closeHandler"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}render(){let{messages:e,className:t="notifications-container",config:r={},onCloseAll:o}=this.props;console.debug("Notofications messages:",e),r={...K,...r};const{autoCloseIn:a,doNotCloseOn:s,animationTime:l,alertProps:c,topToBottom:m,manyMessagesIs:u}=r;if(!Array.isArray(e))return console.error("Notitifactions error: messages is not an array!"),"";e=m?[...e].reverse():e;const d=e.filter((e=>!e.hidden)),p=d.length,h=p>u;return n().createElement("div",{className:"".concat(t).concat(h?" has-many-items":"")},h&&n().createElement(i.Button,{className:"close-button",onClick:o||(()=>console.debug("closing all"))},n().createElement(b.Close,{size:"small",color:"secondary"}),"close all"),n().createElement("div",{className:"messages"},p?d.map((e=>(console.debug("message ",e),e.hidden?null:n().createElement(U,W({key:"notification-".concat(e.id),severity:e.type,onClose:()=>this.closeHandler(e.id),autoCloseIn:null===e.autoCloseIn||void 0===e.autoCloseIn?a:e.autoCloseIn,doNotCloseOn:s,animationTime:l},c),e.message)))):null))}}const Y=z,J=e=>n().createElement(i.Container,null,n().createElement(i.CircularProgress,{color:"primary"})),Q=(e,t,r)=>n=>{console.debug("showMessage is dispatching with",n),n({type:R.SHOW_MESSAGE,payload:{message:e,type:t,autoCloseIn:r}})},X=e=>t=>{t({type:R.HIDE_MESSAGE,payload:e})},Z=e=>t=>{t({type:R.DELETE_MESSAGE,payload:e})},$=()=>e=>{e({type:R.CLEAR_ALL_MESSAGES})};module.exports=t;